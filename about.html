<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>About - matthew zhang</title>
    <style>
        :root {
            --ink: #111111;
            --muted: #6b6b6b;
            --bar: #e9e9e9;
            --stripe: #cfcfcf;
            --accent: #FEC94A;
            --mini-card-width: 190px;
            --mini-gap: 6px;
            --mini-scale: 1;
            --mini-shift: -40px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #ffffff;
            color: var(--ink);
            font-family: Consolas, Menlo, Monaco, 'Courier New', monospace;
            padding: 28px 24px 60px;
        }

        .page {
            max-width: 1200px;
            margin: 0 auto;
        }

        .nav {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 22px;
            font-weight: 900;
            text-transform: uppercase;
            margin-bottom: 18px;
        }

        .nav a {
            text-decoration: none;
            color: var(--accent);
            transition: color 0.3s ease;
            padding: 0 0 6px 0;
            border-radius: 8px;
        }

        .nav a:hover {
            color: var(--accent);
        }


        .intro-section {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 20px;
            margin-bottom: 24px;
        }

        .intro-text {
            grid-column: 1 / 8;
        }

        .intro-photo {
            grid-column: 8 / 13;
            display: flex;
            justify-content: flex-end;
            align-items: flex-start;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 20px;
        }

        .left {
            grid-column: 1 / 7;
        }

        .right {
            grid-column: 7 / 13;
        }

        h1 {
            font-size: 22px;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        /* toggle styles removed */

        p {
            font-size: 14px;
            line-height: 1.6;
            color: var(--ink);
            margin-bottom: 14px;
        }

        .timeline {
            margin: 10px 0 6px;
            max-width: 100%;
        }

        .timeline-track {
            position: relative;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            padding: 6px 6px 18px;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            background: transparent;
            --month-width: 150px;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
        }

        .timeline-track::-webkit-scrollbar {
            display: none;
        }

        .timeline-inner {
            position: relative;
            width: calc(var(--month-width) * 48);
        }

        .timeline-line {
            position: relative;
            height: 2px;
            background: #cfcfcf;
            margin: 10px 0 2px;
            width: 100%;
        }

        .timeline-line::after {
            content: '';
            position: absolute;
            top: 0;
            height: 2px;
            left: var(--onwards-left-px, 0px);
            width: calc(100% - var(--onwards-left-px, 0px));
            background: #FEC94A;
        }

        .timeline-onwards {
            position: absolute;
            left: var(--onwards-left-px, 0px);
            top: -18px;
            font-size: 11px;
            color: #FEC94A;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            transform: translateX(-6px);
        }

        .timeline-year-layer {
            position: sticky;
            left: 0;
            right: 0;
            bottom: 0;
            height: 0;
            pointer-events: none;
            z-index: 2;
        }

        .timeline-year {
            position: absolute;
            left: 0;
            bottom: -131px;
            height: 16px;
            width: 60px;
            font-size: 14px;
            color: #666666;
            text-transform: uppercase;
            letter-spacing: 0.04em;
            font-weight: 700;
            background: #ffffff;
            padding: 0 2px;
        }

        .timeline-year.future {
            color: #FEC94A;
        }

        .timeline-ticks {
            position: relative;
            display: grid;
            grid-auto-flow: column;
            grid-auto-columns: var(--month-width);
            gap: 0;
            align-items: start;
        }

        .timeline-tick {
            position: relative;
            height: 22px;
            scroll-snap-align: start;
            scroll-snap-stop: always;
        }

        .timeline-tick::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 0;
            width: 2px;
            height: 10px;
            background: #bdbdbd;
        }

        .timeline-tick span {
            font-size: 11px;
            color: #666666;
            text-transform: uppercase;
            letter-spacing: 0.04em;
            display: inline-block;
            margin-top: 4px;
        }

        .timeline-events {
            position: relative;
            height: 80px;
            margin-bottom: 8px;
        }

        .timeline-event {
            position: absolute;
            top: 0;
            transform: translateX(-50%);
            text-align: left;
            width: 180px;
        }

        .timeline-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #888888;
            margin-top: 6px;
        }

        .timeline-event-title {
            font-size: 12px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .timeline-event-desc {
            font-size: 11px;
            color: #444444;
            line-height: 1.4;
        }


        .sub {
            font-size: 12px;
            color: var(--muted);
            text-transform: uppercase;
            letter-spacing: 0.04em;
            margin-bottom: 6px;
        }

        ul {
            list-style: none;
            font-size: 14px;
            line-height: 1.7;
            color: var(--ink);
            margin-bottom: 18px;
        }

        .mini-projects {
            margin-top: 12px;
            display: grid;
            grid-template-columns: repeat(2, var(--mini-card-width));
            gap: var(--mini-gap);
            position: relative;
            overflow: visible;
            justify-content: start;
        }

        .mini-projects-scale {
            transform-origin: left top;
            width: fit-content;
            margin: 0 auto;
            transform: translateX(var(--mini-shift)) scale(var(--mini-scale));
        }

        .mini-projects {
            position: relative;
            z-index: 1;
        }

        .mini-projects.mobile-locked .project {
            animation: miniFloat var(--float-duration, 6s) ease-in-out infinite;
            animation-delay: var(--float-delay, 0s);
        }

        .mini-projects .project {
            text-align: center;
            padding: 14px;
            border: 2px solid #999;
            border-radius: 8px;
            background: #ffffff;
            text-decoration: none;
            color: inherit;
            display: block;
            transition: transform 0s linear, box-shadow 0.2s ease;
            transform: translate3d(var(--target-x, 0px), var(--target-y, 0px), 0) rotate(var(--scatter-rot, 0deg));
            will-change: transform;
            backface-visibility: hidden;
            animation: scatter-in var(--throw-dur, 0.55s) cubic-bezier(0.12, 0.75, 0.1, 1) both;
            position: relative;
            aspect-ratio: 3 / 4;
            width: var(--mini-card-width);
        }

        @keyframes miniFloat {
            0%, 100% { transform: translate3d(var(--target-x, 0px), var(--target-y, 0px), 0) rotate(var(--scatter-rot, 0deg)); }
            50% { transform: translate3d(calc(var(--target-x, 0px) + 4px), calc(var(--target-y, 0px) - 6px), 0) rotate(calc(var(--scatter-rot, 0deg) + 1deg)); }
        }

        .mini-projects .project::before {
            content: none;
        }

        .mini-projects .project-title {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 6px;
        }

        .mini-projects .project-image {
            width: 100%;
            height: 120px;
            background: transparent;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            overflow: hidden;
        }

        .mini-projects .project-image img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            display: block;
        }

        .mini-projects .project-description {
            font-size: 12px;
            line-height: 1.4;
            color: #333333;
            margin-bottom: 6px;
        }

        .mini-projects .project-progress {
            font-weight: bold;
            font-size: 12px;
            margin-bottom: 6px;
        }

        .mini-projects .project-date {
            font-size: 12px;
            color: #666666;
        }

        .mini-projects.settled .project {
            transform: translate(0px, 0px) rotate(0deg);
        }

        .mini-projects .project:nth-child(1) {
            --scatter-x: -40px;
            --scatter-y: -28px;
            --scatter-rot: -6deg;
        }

        .mini-projects .project:nth-child(2) {
            --scatter-x: 36px;
            --scatter-y: -22px;
            --scatter-rot: 5deg;
        }

        .mini-projects .project:nth-child(3) {
            --scatter-x: -28px;
            --scatter-y: 34px;
            --scatter-rot: 6deg;
        }

        .mini-projects .project:nth-child(4) {
            --scatter-x: 42px;
            --scatter-y: 30px;
            --scatter-rot: -5deg;
        }

        @keyframes scatter-in {
            from {
                opacity: 1;
                transform: translate(var(--start-x, 120vw), var(--start-y, -120vh)) rotate(var(--start-rot, -18deg));
            }
            to {
                transform: translate(var(--target-x, 0px), var(--target-y, 0px)) rotate(var(--scatter-rot, 0deg));
            }
        }

        .photo {
            width: 100%;
            max-width: 520px;
            aspect-ratio: 4 / 3;
            background: #f0f0f0;
            border: 1px solid #e2e2e2;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--muted);
            font-size: 12px;
            transform: rotate(4deg);
        }

        @media (max-width: 900px) {
            .intro-text, .intro-photo,
            .left, .right {
                grid-column: 1 / 13;
            }

            .intro-photo {
                justify-content: center;
                margin-top: 10px;
            }

            .photo {
                transform: rotate(-2deg);
                max-width: 640px;
            }

            .mini-projects {
                grid-template-columns: repeat(2, var(--mini-card-width));
                justify-content: center;
            }

            .mini-projects-scale {
                --mini-shift: 0px;
                --mini-scale: 0.92;
                margin: 0 auto;
            }

            .timeline {
                display: none;
            }
        }

        @media (min-width: 1000px) {
            .mini-projects-scale {
                --mini-scale: 1.25;
            }
        }
    </style>
</head>
<body>
    <div class="page">
        <div class="nav">
            <a href="index.html">Matthew H Zhang</a>
        </div>

        <section class="intro-section">
            <div class="intro-text">
                <h1>About Me</h1>
                <p>Electrical and Computer Engineering Honors and Canfield Business Honors student at UT Austin. I build hardware, embedded systems, and tooling that make projects feel clean, reliable, and shippable.</p>
                <p>Recent work includes an MCU-based PWM motor driver board for a 12V DC turntable, and a projector pen that maps force and position data to a wall using BLE and computer vision.</p>
                <div class="timeline">
                    <div class="timeline-track" id="timelineTrack">
                        <div class="timeline-year-layer" id="timelineYearLayer">
                            <span class="timeline-year" id="timelineYearCurrent">2024</span>
                            <span class="timeline-year" id="timelineYearNext">2025</span>
                        </div>
                        <div class="timeline-inner" id="timelineInner">
                        <div class="timeline-events">
                            <div class="timeline-event" style="left: calc(var(--month-width) * 2);">
                                <div class="timeline-event-title">Placeholder Event</div>
                                <div class="timeline-event-desc">Add details later.</div>
                                <div class="timeline-dot"></div>
                            </div>
                            <div class="timeline-event" style="left: calc(var(--month-width) * 7);">
                                <div class="timeline-event-title">Placeholder Event</div>
                                <div class="timeline-event-desc">Add details later.</div>
                                <div class="timeline-dot"></div>
                            </div>
                            <div class="timeline-event" style="left: calc(var(--month-width) * 15);">
                                <div class="timeline-event-title">Placeholder Event</div>
                                <div class="timeline-event-desc">Add details later.</div>
                                <div class="timeline-dot"></div>
                            </div>
                            <div class="timeline-event" style="left: calc(var(--month-width) * 23);">
                                <div class="timeline-event-title">Placeholder Event</div>
                                <div class="timeline-event-desc">Add details later.</div>
                                <div class="timeline-dot"></div>
                            </div>
                            <div class="timeline-event" style="left: calc(var(--month-width) * 31);">
                                <div class="timeline-event-title">Placeholder Event</div>
                                <div class="timeline-event-desc">Add details later.</div>
                                <div class="timeline-dot"></div>
                            </div>
                            <div class="timeline-event" style="left: calc(var(--month-width) * 39);">
                                <div class="timeline-event-title">Placeholder Event</div>
                                <div class="timeline-event-desc">Add details later.</div>
                                <div class="timeline-dot"></div>
                            </div>
                        </div>
                        <div class="timeline-line">
                            <span class="timeline-onwards">Onwards!</span>
                        </div>
                        <div class="timeline-ticks">
                            <div class="timeline-tick"><span>Jan</span></div>
                            <div class="timeline-tick"><span>Feb</span></div>
                            <div class="timeline-tick"><span>Mar</span></div>
                            <div class="timeline-tick"><span>Apr</span></div>
                            <div class="timeline-tick"><span>May</span></div>
                            <div class="timeline-tick"><span>Jun</span></div>
                            <div class="timeline-tick"><span>Jul</span></div>
                            <div class="timeline-tick"><span>Aug</span></div>
                            <div class="timeline-tick"><span>Sep</span></div>
                            <div class="timeline-tick"><span>Oct</span></div>
                            <div class="timeline-tick"><span>Nov</span></div>
                            <div class="timeline-tick"><span>Dec</span></div>
                            <div class="timeline-tick"><span>Jan</span></div>
                            <div class="timeline-tick"><span>Feb</span></div>
                            <div class="timeline-tick"><span>Mar</span></div>
                            <div class="timeline-tick"><span>Apr</span></div>
                            <div class="timeline-tick"><span>May</span></div>
                            <div class="timeline-tick"><span>Jun</span></div>
                            <div class="timeline-tick"><span>Jul</span></div>
                            <div class="timeline-tick"><span>Aug</span></div>
                            <div class="timeline-tick"><span>Sep</span></div>
                            <div class="timeline-tick"><span>Oct</span></div>
                            <div class="timeline-tick"><span>Nov</span></div>
                            <div class="timeline-tick"><span>Dec</span></div>
                            <div class="timeline-tick"><span>Jan</span></div>
                            <div class="timeline-tick"><span>Feb</span></div>
                            <div class="timeline-tick"><span>Mar</span></div>
                            <div class="timeline-tick"><span>Apr</span></div>
                            <div class="timeline-tick"><span>May</span></div>
                            <div class="timeline-tick"><span>Jun</span></div>
                            <div class="timeline-tick"><span>Jul</span></div>
                            <div class="timeline-tick"><span>Aug</span></div>
                            <div class="timeline-tick"><span>Sep</span></div>
                            <div class="timeline-tick"><span>Oct</span></div>
                            <div class="timeline-tick"><span>Nov</span></div>
                            <div class="timeline-tick"><span>Dec</span></div>
                            <div class="timeline-tick"><span>Jan</span></div>
                            <div class="timeline-tick"><span>Feb</span></div>
                            <div class="timeline-tick"><span>Mar</span></div>
                            <div class="timeline-tick"><span>Apr</span></div>
                            <div class="timeline-tick"><span>May</span></div>
                            <div class="timeline-tick"><span>Jun</span></div>
                            <div class="timeline-tick"><span>Jul</span></div>
                            <div class="timeline-tick"><span>Aug</span></div>
                            <div class="timeline-tick"><span>Sep</span></div>
                            <div class="timeline-tick"><span>Oct</span></div>
                            <div class="timeline-tick"><span>Nov</span></div>
                            <div class="timeline-tick"><span>Dec</span></div>
                        </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="intro-photo">
                <div class="photo">IMAGE PLACEHOLDER</div>
            </div>
        </section>

        <div class="grid">
            <section class="left">
                <h1>Summary</h1>
                <p>Hands-on builder with a focus on embedded systems, reliable hardware, and fast iteration. I like tight feedback loops, clean schematics, and projects that ship.</p>

                <h1>Projects</h1>
                <div class="mini-projects-scale">
                    <div class="mini-projects" id="miniProjects"></div>
                </div>
            </section>

            <section class="right">
                <h1>Education</h1>
                <p><span class="sub">May 2029</span><br>The University of Texas at Austin — B.S. Electrical and Computer Engineering Honors; B.B.A. Canfield Business Honors. GPA 3.73.</p>
                <p><span class="sub">Coursework</span><br>Circuit Analysis and Design, Computer Systems, Embedded Systems, Software Design.</p>

                <h1>Skills</h1>
                <p><span class="sub">Technical</span></p>
                <ul>
                    <li>C/C++, Assembly, Embedded Systems</li>
                    <li>Onshape, KiCad, LTSpice</li>
                    <li>3D Printing, Machining &amp; Shop Tools</li>
                </ul>

                <h1>Experience</h1>
                <p><span class="sub">Aug 2023 – Sep 2025</span><br>FRC Team #9400 — Team Captain &amp; Mechanical Design Lead. Led fabrication, CAD, and sponsorship efforts; improved national ranking (1649 → 898 of ~2,900 teams).</p>
                <p><span class="sub">Mar 2023 – May 2025</span><br>Diversity Matters Club — VP &amp; Pine Ridge STEM Kids Program Director; built and delivered STEM curricula and outreach.</p>

                <h1>Awards</h1>
                <ul>
                    <li>IEEE RAS 2025 Robotathon — 1st Place, Software Design Award</li>
                    <li>FRC Team #9400 — Rising All Stars Award; Rookie Inspiration Award</li>
                </ul>
            </section>
        </div>
    </div>
    <script>
        const summarySection = document.querySelector('.left');
        const miniProjects = document.querySelector('#miniProjects');
        let allProjects = [];

        // Swipe/drag timeline
        const timelineTrack = document.getElementById('timelineTrack');
        if (timelineTrack) {
            let isDown = false;
            let startX = 0;
            let scrollLeft = 0;
            const yearCurrent = document.getElementById('timelineYearCurrent');
            const yearNext = document.getElementById('timelineYearNext');
            const yearStart = 2024;

            const startDrag = (x) => {
                isDown = true;
                startX = x;
                scrollLeft = timelineTrack.scrollLeft;
            };

            const moveDrag = (x) => {
                if (!isDown) return;
                const walk = (x - startX) * 1.2;
                timelineTrack.scrollLeft = scrollLeft - walk;
            };

            const endDrag = () => {
                isDown = false;
            };

            timelineTrack.addEventListener('mousedown', (e) => startDrag(e.pageX));
            timelineTrack.addEventListener('mousemove', (e) => moveDrag(e.pageX));
            timelineTrack.addEventListener('mouseup', endDrag);
            timelineTrack.addEventListener('mouseleave', endDrag);

            timelineTrack.addEventListener('touchstart', (e) => startDrag(e.touches[0].pageX), { passive: true });
            timelineTrack.addEventListener('touchmove', (e) => moveDrag(e.touches[0].pageX), { passive: true });
            timelineTrack.addEventListener('touchend', endDrag);

            const updateYear = () => {
                if (!yearCurrent || !yearNext) return;
                const tick = timelineTrack.querySelector('.timeline-tick');
                const tickWidth = tick ? tick.getBoundingClientRect().width : 150;
                const yearWidth = tickWidth * 12;
                const raw = Math.max(0, timelineTrack.scrollLeft);
                const yearIndex = Math.floor(raw / yearWidth);
                const current = yearStart + yearIndex;
                const next = current + 1;
                const rawNextX = ((yearIndex + 1) * yearWidth) - raw;
                const trackWidth = timelineTrack.clientWidth || yearWidth;
                const nowYear = new Date().getFullYear();
                yearCurrent.textContent = String(current);
                yearNext.textContent = String(next);
                yearCurrent.style.transform = 'translateX(0px)';
                yearCurrent.classList.toggle('future', current > nowYear);
                yearNext.classList.toggle('future', next > nowYear);
                yearNext.style.transform = `translateX(${Math.max(0, rawNextX)}px)`;
            };

            timelineTrack.addEventListener('scroll', updateYear, { passive: true });
            window.addEventListener('resize', updateYear);
            updateYear();

            const updateOnwards = () => {
                const line = timelineTrack.querySelector('.timeline-line');
                const tick = timelineTrack.querySelector('.timeline-tick');
                if (!line || !tick) return;
                const tickWidth = tick.getBoundingClientRect().width;
                if (!tickWidth || tickWidth < 1) {
                    requestAnimationFrame(updateOnwards);
                    return;
                }
                const totalMonths = timelineTrack.querySelectorAll('.timeline-tick').length;
                const start = new Date(2024, 0, 1);
                const nowDate = new Date();
                const monthsSinceStart = (nowDate.getFullYear() - start.getFullYear()) * 12 + (nowDate.getMonth() - start.getMonth());
                const clampedMonths = Math.max(0, Math.min(totalMonths - 1, monthsSinceStart));
                const daysInMonth = new Date(nowDate.getFullYear(), nowDate.getMonth() + 1, 0).getDate();
                const monthProgress = Math.min(1, (nowDate.getDate() - 1) / Math.max(1, daysInMonth));
                const offsetPx = (clampedMonths + monthProgress) * tickWidth;
                const maxPx = Math.max(0, (totalMonths * tickWidth) - 1);
                const clampedPx = Math.max(0, Math.min(maxPx, offsetPx));
                line.style.setProperty('--onwards-left-px', `${clampedPx}px`);
            };

            requestAnimationFrame(updateOnwards);
            window.addEventListener('resize', updateOnwards);
            const autoScrollToRecent = () => {
                const tick = timelineTrack.querySelector('.timeline-tick');
                if (!tick) return;
                const tickWidth = tick.getBoundingClientRect().width;
                if (!tickWidth || tickWidth < 1) {
                    requestAnimationFrame(autoScrollToRecent);
                    return;
                }
                const nowDate = new Date();
                const start = new Date(2024, 0, 1);
                const monthsSinceStart = (nowDate.getFullYear() - start.getFullYear()) * 12 + (nowDate.getMonth() - start.getMonth());
                const targetMonth = Math.max(0, monthsSinceStart - 3);
                const targetLeft = Math.max(0, targetMonth * tickWidth);
                const startLeft = timelineTrack.scrollLeft;
                const duration = 2000;
                const originalSnap = timelineTrack.style.scrollSnapType;
                timelineTrack.style.scrollSnapType = 'none';
                const startTime = performance.now();
                const easeInOutCubic = (t) => t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;
                const animate = (now) => {
                    const elapsed = Math.min(1, (now - startTime) / duration);
                    const eased = easeInOutCubic(elapsed);
                    timelineTrack.scrollLeft = startLeft + (targetLeft - startLeft) * eased;
                    if (elapsed < 1) {
                        requestAnimationFrame(animate);
                    } else {
                        timelineTrack.style.scrollSnapType = originalSnap;
                    }
                };
                requestAnimationFrame(animate);
            };

            requestAnimationFrame(autoScrollToRecent);
        }

        const setupMiniProjectMotion = () => {
            if (!summarySection || !miniProjects) return;
            const getCards = () => Array.from(miniProjects.querySelectorAll('.project'));
            let lastX = null;
            let lastY = null;
            let lastT = null;
            let activeHover = null;
            const states = new Map();
            let motionStrength = 2.0;
            let biasStrength = 0.0005;
            let glideFriction = 0.97;
            let glideBackEnabled = true;
            const isMobile = window.matchMedia('(max-width: 900px)').matches;

            const ensureState = (card) => {
                if (!states.has(card)) {
                    const x = parseFloat(card.style.getPropertyValue('--target-x')) || 0;
                    const y = parseFloat(card.style.getPropertyValue('--target-y')) || 0;
                    const rot = parseFloat(getComputedStyle(card).getPropertyValue('--scatter-rot')) || 0;
                    states.set(card, { x, y, vx: 0, vy: 0, rot, vr: 0, baseX: x, baseY: y, baseRot: rot, biasDelayUntil: 0 });
                }
                return states.get(card);
            };

            const applyRandomOffsets = () => {
                miniProjects.classList.remove('settled');
                const baseOffsets = [
                    { x: -18, y: -14, r: -6 },
                    { x: 14, y: -10, r: 5 },
                    { x: -12, y: 16, r: 7 },
                    { x: 16, y: 18, r: -5 }
                ];
                const baseCenter = baseOffsets.reduce((acc, v) => {
                    acc.x += v.x;
                    acc.y += v.y;
                    return acc;
                }, { x: 0, y: 0 });
                baseCenter.x /= baseOffsets.length;
                baseCenter.y /= baseOffsets.length;

                const initCard = (card, index) => {
                    const rawScatterX = parseFloat(getComputedStyle(card).getPropertyValue('--scatter-x'));
                    const rawScatterY = parseFloat(getComputedStyle(card).getPropertyValue('--scatter-y'));
                    const scatterX = Number.isFinite(rawScatterX) ? rawScatterX : 0;
                    const scatterY = Number.isFinite(rawScatterY) ? rawScatterY : 0;
                    const pageWidth = window.innerWidth;
                    const pageHeight = window.innerHeight;
                    const randX = (Math.random() * (pageWidth * 0.7)) - (pageWidth * 0.35);
                    const randY = (Math.random() * (pageHeight * 0.7)) - (pageHeight * 0.35);
                    const randRot = (Math.random() * 36) - 18;
                    const startX = `${120 + Math.random() * 60}vw`;
                    const startY = `${-120 - Math.random() * 60}vh`;
                    const startRot = `${-30 - Math.random() * 30}deg`;
                    const throwDur = `${0.35 + Math.random() * 0.45}s`;
                    const targetX = scatterX + randX;
                    const targetY = scatterY + randY;
                    card.style.setProperty('--target-x', `${targetX}px`);
                    card.style.setProperty('--target-y', `${targetY}px`);
                    card.style.setProperty('--scatter-rot', `${randRot}deg`);
                    card.style.setProperty('--start-x', startX);
                    card.style.setProperty('--start-y', startY);
                    card.style.setProperty('--start-rot', startRot);
                    card.style.setProperty('--throw-dur', throwDur);
                    const state = ensureState(card);
                    state.x = targetX;
                    state.y = targetY;
                    state.rot = randRot;
                    state.vr = 0;
                    const base = baseOffsets[index % baseOffsets.length];
                    state.baseX = base.x;
                    state.baseY = base.y;
                    state.baseRot = base.r;
                    state.vx = 0;
                    state.vy = 0;
                };

                getCards().forEach((card, index) => initCard(card, index));
            };

            applyRandomOffsets();

            if (isMobile) {
                miniProjects.classList.add('mobile-locked');
                miniProjects.style.transform = 'translate(20px, 20px)';
                const cards = getCards();
                cards.forEach((card) => {
                    const state = ensureState(card);
                    state.baseRot = (Math.random() * 6) - 3;
                    const floatDelay = (Math.random() * 1.6).toFixed(2);
                    const floatDuration = (5.2 + Math.random() * 2.2).toFixed(2);
                    state.x = state.baseX;
                    state.y = state.baseY;
                    state.vx = 0;
                    state.vy = 0;
                    state.rot = state.baseRot;
                    card.style.setProperty('--target-x', `${state.x}px`);
                    card.style.setProperty('--target-y', `${state.y}px`);
                    card.style.setProperty('--scatter-rot', `${state.rot}deg`);
                    card.style.setProperty('--float-delay', `${floatDelay}s`);
                    card.style.setProperty('--float-duration', `${floatDuration}s`);
                    card.style.transform = `translate3d(${state.x}px, ${state.y}px, 0) rotate(${state.rot}deg)`;
                });
                return;
            }

            let resizeTimer;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(applyRandomOffsets, 120);
            });

            summarySection.addEventListener('mouseenter', () => {
                miniProjects.classList.add('settled');
            });
            summarySection.addEventListener('mouseleave', () => {
                miniProjects.classList.remove('settled');
                lastX = null;
                lastY = null;
                lastT = null;
            });

            miniProjects.addEventListener('mousemove', (event) => {
                lastX = event.clientX;
                lastY = event.clientY;
                lastT = performance.now();
            });

            miniProjects.addEventListener('pointerenter', (event) => {
                const hovered = event.target.closest('.project');
                if (!hovered || lastX === null || lastY === null || lastT === null) return;
                if (activeHover === hovered) return;
                activeHover = hovered;
                const nowTs = performance.now();
                const cooldownUntil = parseFloat(hovered.dataset.cooldownUntil || '0');
                if (nowTs < cooldownUntil) return;

                const now = performance.now();
                const dt = Math.max(16, now - lastT);
                const vx = (event.clientX - lastX) / dt;
                const vy = (event.clientY - lastY) / dt;

                const speed = Math.min(1, Math.hypot(vx, vy) * 0.6);
                const dirX = vx === 0 ? 0 : vx / Math.max(0.001, Math.abs(vx));
                const dirY = vy === 0 ? 0 : vy / Math.max(0.001, Math.abs(vy));
                const pushX = dirX * (0.3 + 3.2 * Math.pow(speed, 2.2)) * motionStrength;
                const pushY = dirY * (0.25 + 2.6 * Math.pow(speed, 2.2)) * motionStrength;
                const state = ensureState(hovered);
                state.vx = Math.max(-8, Math.min(8, state.vx + pushX));
                state.vy = Math.max(-6, Math.min(6, state.vy + pushY));
                state.vr = Math.max(-2.5, Math.min(2.5, state.vr + (dirX - dirY) * (0.6 + 1.2 * speed)));
                state.biasDelayUntil = nowTs + 500;
                hovered.dataset.cooldownUntil = (nowTs + 120).toString();
            }, true);

            miniProjects.addEventListener('mouseleave', () => {
                lastX = null;
                lastY = null;
                lastT = null;
                activeHover = null;
            });

            window.addEventListener('resize', () => {});

            const step = () => {
                getCards().forEach((card) => {
                    const state = ensureState(card);
                    const now = performance.now();
                    if (glideBackEnabled && now >= state.biasDelayUntil) {
                        const dx = state.baseX - state.x;
                        const dy = state.baseY - state.y;
                        const dist = Math.hypot(dx, dy);
                        const biasScale = Math.min(1, dist / 120);
                        const towardX = dx * biasStrength * biasScale;
                        const towardY = dy * biasStrength * biasScale;
                        state.vx += towardX;
                        state.vy += towardY;
                    }
                    state.vr += (state.baseRot - state.rot) * 0.0006;
                    if (Math.abs(state.vx) > 0.01 || Math.abs(state.vy) > 0.01) {
                        state.x += state.vx;
                        state.y += state.vy;
                        state.vx *= glideFriction;
                        state.vy *= glideFriction;
                        const dx = state.baseX - state.x;
                        const dy = state.baseY - state.y;
                        const dist = Math.hypot(dx, dy);
                        if (dist < 35) {
                            state.vx *= 0.9;
                            state.vy *= 0.9;
                        }
                        // friction zone removed
                        state.rot += state.vr;
                        state.vr *= 0.9;
                        card.style.setProperty('--target-x', `${state.x}px`);
                        card.style.setProperty('--target-y', `${state.y}px`);
                        card.style.setProperty('--scatter-rot', `${state.rot}deg`);

                        const rect = card.getBoundingClientRect();
                        const margin = 12;
                        const minX = margin;
                        const maxX = window.innerWidth - margin;
                        const minY = margin;
                        const maxY = window.innerHeight - margin;
                        const centerX = rect.left + rect.width / 2;
                        const centerY = rect.top + rect.height / 2;

                        if (centerX < minX) {
                            state.vx = Math.abs(state.vx) * 0.7;
                            state.x += (minX - centerX);
                            card.style.setProperty('--target-x', `${state.x}px`);
                        } else if (centerX > maxX) {
                            state.vx = -Math.abs(state.vx) * 0.7;
                            state.x -= (centerX - maxX);
                            card.style.setProperty('--target-x', `${state.x}px`);
                        }
                        if (centerY < minY) {
                            state.vy = Math.abs(state.vy) * 0.7;
                            state.y += (minY - centerY);
                            card.style.setProperty('--target-y', `${state.y}px`);
                        } else if (centerY > maxY) {
                            state.vy = -Math.abs(state.vy) * 0.7;
                            state.y -= (centerY - maxY);
                            card.style.setProperty('--target-y', `${state.y}px`);
                        }
                    } else {
                        state.vx = 0;
                        state.vy = 0;
                    }
                });
                requestAnimationFrame(step);
            };
            requestAnimationFrame(step);
        };

        const buildMiniProjects = (projects) => {
            const shuffled = projects.sort(() => Math.random() - 0.5).slice(0, 4);
            miniProjects.innerHTML = shuffled.map((p) => {
                const delay = (Math.random() * 260).toFixed(0);
                return `
                <a class="project" href="${p.href}" style="animation-delay: ${delay}ms;">
                    <div class="project-title">${p.title}</div>
                    <div class="project-image">
                        <img src="${p.img}" alt="${p.title}">
                    </div>
                    <div class="project-progress">${p.progress}</div>
                    <div class="project-description">${p.description}</div>
                    <div class="project-date">${p.date}</div>
                </a>
            `;
            }).join('');
            setupMiniProjectMotion();
        };

        fetch('projects.html')
            .then((res) => res.text())
            .then((html) => {
                const doc = new DOMParser().parseFromString(html, 'text/html');
                const projectEls = Array.from(doc.querySelectorAll('.project'));
                const projects = projectEls.map((el) => {
                    const link = el.querySelector('a');
                    const title = el.querySelector('.project-title')?.textContent?.trim() || 'Project';
                    const img = el.querySelector('.project-image img')?.getAttribute('src') || '';
                    const progress = el.querySelector('.project-progress')?.textContent?.trim() || '';
                    const description = el.querySelector('.project-description')?.textContent?.trim() || '';
                    const date = el.querySelector('.project-date')?.textContent?.trim() || '';
                    const href = link?.getAttribute('href') || 'projects.html';
                    return { title, img, progress, description, date, href };
                });

                if (projects.length) {
                    allProjects = projects;
                    buildMiniProjects(projects);
                }
            })
            .catch(() => {
                setupMiniProjectMotion();
            });
    </script>
</body>
</html>
